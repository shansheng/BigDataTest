var tagnames=[""];$(function(){$("#hcourse").addClass("active");initpage()});var pageSize=10;function initpage(){num_entries=0==$("#totalcount").val()?1:$("#totalcount").val();$("#Pagination").pagination(num_entries,{callback:pageselectCallback,items_per_page:pageSize})}function pagination(a){var d=0==$("#totalcount").val()?1:$("#totalcount").val(),d=Math.ceil(d/pageSize);1==d?($("#Pagination").children("li").first().removeClass("onactive ").addClass("disabled"),$("#Pagination").children("li:last-child").removeClass("onactive ").addClass("disabled")):a==d?$("#Pagination").children("li:last-child").removeClass("onactive").addClass("disabled"):1==a&&$("#Pagination").children("li").first().removeClass("onactive").addClass("disabled")}function pageselectCallback(a,d){var c="",f=a+1,e=$("#category").val(),g=$("#org").val(),h=$("#status").val(),e={currentPageNo:f,categoryname:e,tagnames:tagnames,orgid:g,status:h};pagination(f);$.ajax({url:contextPath+"/course/pagination",type:"post",data:e,traditional:!0,success:function(b){if(b.success){json=eval(b.other);for(b=0;b<json.length;b++){var a=null==json[b].describle||""==json[b].describle?"\u6682\u65e0\u63cf\u8ff0":json[b].describle,d=json[b].thumb;d||(d=contextPath+"/assets/images/coursePicture.png");c+="\x3cdiv class\x3d'col-xs-12' style\x3d'margin:20px 0;background: #fff;padding: 23px 0 0 0;'\x3e\x3cdiv style\x3d';margin: 0 auto;position: relative;padding-right:5px;padding-left:5px'\x3e\x3cli class\x3d'course-li' style\x3d'width:100%!important;height:auto;min-height:150px;'\x3e\x3cdiv class\x3d'col-xs-3'\x3e\x3ca href\x3d'"+contextPath+"/course/courseinfo/"+json[b].courseid+"'\x3e\x3cimg src\x3d'"+d+"' class\x3d'img-responsive' style\x3d'width:100%;'\x3e";c+="\x3cdiv class\x3d'sgz-time'\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d'col-xs-9'\x3e\x3cdiv class\x3d'' style\x3d'padding:0'\x3e\x3cdiv  style\x3d'overflow: hidden'\x3e\x3ca style\x3d'font-size:20px;color:#333' title\x3d"+json[b].basecoursename+"["+json[b].coursename+"] href\x3d'"+contextPath+"/course/courseinfo/"+json[b].courseid+"'\x3e"+json[b].basecoursename+"\x3c/a\x3e\x3ca style\x3d'font-size:20px;color:#333;'  title\x3d"+json[b].basecoursename+"["+json[b].coursename+"] href\x3d'"+contextPath+"/course/courseinfo/"+json[b].courseid+"'\x3e["+json[b].coursename+"]\x3c/a\x3e\x3c/div\x3e";c=null==json[b].headimg||""==json[b].headimg?c+("\x3cdiv style\x3d'margin-top:10px;'\x3e\x3cimg src\x3d'"+ucurl+"/assets/images/user.jpg' style\x3d'float: left; border-radius: 50%; width: 35px;height: 35px;'/\x3e"):c+("\x3cdiv style\x3d'margin-top:10px;'\x3e\x3cimg src\x3d'"+ucurl+json[b].headimg+"' style\x3d'float: left; border-radius: 50%; width: 35px;height: 35px;'/\x3e");c=null==json[b].realname||""==json[b].realname?c+("\x3cdiv style\x3d'margin-left: 19px;float:left;margin-top: 7px;' \x3e"+json[b].username+"\x3c/div\x3e"):c+("\x3cdiv style\x3d'margin-left:19px;float:left;margin-top: 7px;' \x3e"+json[b].realname+"\x3c/div\x3e");d=json[b].endtime;null==d&&(d="");c+="\x3cdiv style\x3d'margin-left:19px;float:left;margin-top: 7px;min-width:200px;' \x3e\x3cdiv style\x3d'height:20px;'\x3e\x3cspan style\x3d'float:left;font-size: 12px;color: #b7b7b7;'\x3e"+json[b].starttime+"\x3c/span\x3e\x3cspan style\x3d'float:right;font-size: 12px;color: #b7b7b7;'\x3e"+d+"\x3c/span\x3e\x3c/div\x3e \x3cdiv class\x3d'course-progress-bar'\x3e \x3cdiv class\x3d'progress-bar  progress-bar-success' role\x3d'progressbar' aria-valuenow\x3d'60' aria-valuemin\x3d'0' aria-valuemax\x3d'100' style\x3d'width: "+json[b].progress+"%;'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'clearfix'\x3e\x3c/div\x3e\x3c/div\x3e";c+="\x3cdiv style\x3d'height:40px;overflow:hidden;margin-top:4px'\x3e"+a+"\x3c/div\x3e";c=null==json[b].logoimg||""==json[b].logoimg?c+("\x3cdiv class\x3d'course_pl' style\x3d'float:left;font-size:12px'\x3e\x3cimg src\x3d'"+ucurl+"/assets/images/jg.png' class\x3d'orgimg'/\x3e\x3c/div\x3e"):c+("\x3cdiv class\x3d'course_pl' style\x3d'float:left;font-size:12px'\x3e\x3cimg src\x3d'"+ucurl+json[b].logoimg+"' class\x3d'orgimg'/\x3e\x3c/div\x3e");c+="\x3cdiv\x3e\x3cdiv class\x3d'course_pl' style\x3d'float:left;font-size:12px' title\x3d'"+json[b].orgname+"'\x3e";c=16<json[b].orgname.length?c+(json[b].orgname.substring(0,16)+"...\x3c/div\x3e"):c+(json[b].orgname+"\x3c/div\x3e");c+="\x3cdiv class\x3d'course_pl' style\x3d'float:right;font-size:12px;margin-left: 40px;'\x3e\x3ci class\x3d'glyphicon glyphicon-user'\x3e\x3c/i\x3e"+json[b].studentcount+"\x3c/div\x3e";c+="\x3cdiv class\x3d'course_pl' style\x3d'float:right;font-size:12px;margin-left: 10px'\x3e\x3ci class\x3d'glyphicon glyphicon-star-empty'\x3e\x3c/i\x3e"+json[b].favoritenum+"\x3c/div\x3e";c+="\x3cdiv class\x3d'clearfix'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3cdiv class\x3d'clearfix'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"}c+='\x3cdiv class\x3d"clearfix"\x3e\x3c/div\x3e';$("#course-list").html(c);$(".course-picture img").addClass("carousel-inner img-responsive")}}});return!1}function selCategory(a){$(".category").removeClass("active");$("#"+a.id).addClass("active");$(".tag").removeClass("tagon");a=a.title;$("#category").val(a);gettotalcount()}function selOrg(a){$(".org").removeClass("active");$("#"+a.id).addClass("active");$(".tag").removeClass("tagon");a=a.id;$("#org").val(a.substring(4,a.length));gettotalcount()}function selStatus(a){$(".status").removeClass("active");$("#"+a.id).addClass("active");$(".tag").removeClass("tagon");a=a.id;$("#status").val(a.substring(7,a.length));gettotalcount()}function selTag(a){"tag-0"==a.id?($(".tag").removeClass("active"),$("#tag-0").addClass("active")):"cattag tag"==a.className?($("#tag-0").removeClass("active"),$("#"+a.id).addClass("active")):"cattag tag active"==a.className&&($("#tag-0").removeClass("active"),$("#"+a.id).removeClass("active"));a=$(".cattag.tag.active");""!=a&&0!=a.length||$("#tag-0").addClass("active");a=$(".cattag.tag.active");tagnames=[];for(var d=0;d<a.length;d++)tagnames[d]=a[d].title;gettotalcount()}function gettotalcount(){var a=$("#category").val(),d=$("#org").val(),c=$("#status").val();$.ajax({url:contextPath+"/course/gettotalcount",type:"post",data:{currentPageNo:1,categoryname:a,tagnames:tagnames,orgid:d,status:c},traditional:!0,success:function(a){$("#totalcount").val(a.other);initpage()}})};