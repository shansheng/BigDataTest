<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<!-- Required Meta Tags Always Come First -->
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<#include '../common/stylesheets1.html'>
<link href="${request.contextPath}/assets/stylesheets/pages/gwdata.css" rel="stylesheet">
<link href="${request.contextPath}/assets/stylesheets/header.css" rel="stylesheet">
<link href="${request.contextPath}/assets/stylesheets/font-awesome.min.css" rel="stylesheet">
<link href="${request.contextPath}/assets/stylesheets/swiper.min.css" rel="stylesheet">
<title>斗学网-学情</title>
<style>
body {
    padding: 0;
    margin: 0;
    font-family: "microsoft yahei"!important;
    background: #f1f4f6;
    min-width: 1400px;
    height: 100%;
    position: absolute!important;
}
.d3-tree{
	overflow: auto;
}
.node circle {
	fill: #555;
	stroke: #555;
	stroke-width: 1px;
}

.node {
	font: 12px sans-serif;
}

.link {
	fill: none;
	stroke: #ccc;
	stroke-width: 1.5px;
}
.axis path,.axis line{
	fill: none;
	stroke: black;
	shape-rendering: crispEdges;
}
 
.axis text {
	font-family: sans-serif;
	font-size: 11px;
}
.axis-line{
	stroke: #ddd !important;
}
.myrect{
	fill :rgba(66, 139, 202, 0.56);
}
.text-num{
	fill: #4caf50;
}
 .link {
        fill: none;
        stroke: #555;
        stroke-opacity: 0.4;
        stroke-width: 1px;
    }
    text {
        font-family: "Arial Black", Gadget, sans-serif;
        fill: black;
        font-weight: bold;
        font-size: 14px
    }

    .xAxis .tick text{
        fill: black;
    }
    .grid .tick line{
        stroke: grey;
        stroke-dasharray: 5, 10;
        opacity: 0.7;
    }
    .grid path{
        stroke-width: 0;
    }

    .node circle {
        fill: #999;
    }
    .node--internal circle {
        fill: #555;
    }
    .node--internal text {
        font-size: 16px;
        text-shadow: 0 2px 0 #fff, 0 -2px 0 #fff, 2px 0 0 #fff, -2px 0 0 #fff;
    }
    .node--leaf text {
        fill: black;
    }
    .ballG text {
        fill: white;
    }


.circle{
    width: 50px;
    height: 50px;
    background: #ffb400;
    text-align: center;
    border-radius: 50%;
    line-height: 49px;
    color: #fff;

}

.pmfont{
font-size: 16px;
    line-height: 50px;
}

.pmcircle{
width: 20px;
    height: 20px;
    background: #ccc;
    border-radius: 50%;
    color: #fff;
    text-align: center;
    /* padding: 2px 10px 0 0; */
    margin: 14px 10px;
}

.xsshow{
border:2px solid #409A44;
}

.checkboxs{
  overflow:hidden;
  max-width:253.5px
}

.imgtea{
border-radius:50%;
margin-bottom:5px
}

.teaboxs{
margin: 0 20px;
color:#333;
font-weight:600
}

.img{
    width: 106.6666px;
    height: 58.333px;
    margin-right: 10px;
    margin-left: 35px;
}

.courseTitle{
font-size: 17px;
    font-weight: 600;
  
}

.courseTea{
margin-top: 7px;
  color: #909090;
}

.stunum{
 margin-left:20px
}

.courseScore{
    width: 50px;
    height: 50px;
    text-align: center;
    background: #55B5AC;
    border-radius: 50%;
    line-height: 50px;
    color: #fff;
}
</style>
</head>
<body>
<div class="container-fluid">
<#include '../learning/learnLeft.html'>
<div class="main-right">
<#include '../learning/learnHeader.html'>
<div class="col-xs-12">
<div class="panel panel-default panel-box" style="margin-top: 20px;">
    <div class="panel-body">
      <div class="swiper-container" style="padding:0 35px">
      <div class="swiper-wrapper" id="spoic">
          <div class="swiper-slide ImgBox check">
	        <img src="/assets/images/default_img.png" class="img-responsive"/>
         </div>
          <div class="swiper-slide">
	        <img src="/assets/images/default_img.png" class="img-responsive"/>
         </div>
          <div class="swiper-slide">
	        <img src="/assets/images/default_img.png" class="img-responsive"/>
         </div>
          <div class="swiper-slide">
	        <img src="/assets/images/default_img.png" class="img-responsive"/>
         </div>
          <div class="swiper-slide">
	        <img src="/assets/images/default_img.png" class="img-responsive"/>
         </div>
          <div class="swiper-slide">
	        <img src="/assets/images/default_img.png" class="img-responsive"/>
         </div>
          <div class="swiper-slide">
	        <img src="/assets/images/default_img.png" class="img-responsive"/>
         </div>
          <div class="swiper-slide">
	        <img src="/assets/images/default_img.png" class="img-responsive"/>
         </div>

        </div>
        <!-- Add Arrows -->
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
      </div>
    </div>
</div>
</div>

<div class="col-xs-12">
<div class="panel panel-default panel-box">

	<div class="panel-body">
<!-- 	<div class="img pull-left" id="lfturl"> -->
<!-- 	 <img src="/assets/images/default_img.png" class="img-responsive"/> -->
<!-- 	 </div> -->
	 <div id="xsdhow">
	 <div class="pull-left">
	  <div class="courseTitle">JavaWeb云应用开发</div>
	   <div class="courseTea">
	   <span>老师&nbsp;:&nbsp;张新芬,张卫荣</span>
	    <span class="stunum">学生&nbsp;:&nbsp;175人</span>
	   </div>
	 </div>
	 <div class="pull-right">
	  <div class="courseScore"><span>72</span>分</div>
	 </div>
	 </div>
	</div>
</div>
</div>

<div class="col-xs-12">
<div class="panel panel-default panel-box">

	<div class="panel-body">
	<div class="col-xs-12">
	 <div id="main" style="width: 100%;height:550px"></div>
		 </div>
	<div class="col-xs-12">
	 <div id="main1" style="width: 100%;height:550px"></div>
		 </div>
	</div>
</div>
</div>






</div>
</div>
<#include '../common/javascripts.html'>
<script src="${request.contextPath}/assets/javascripts/echarts3/echarts.min.js" type="text/javascript"></script>
<script src="${request.contextPath}/assets/javascripts/swiper.min.js"></script>
<script>
var chart = echarts.init(document.getElementById('main')); 
var chart1 = echarts.init(document.getElementById('main1')); 
var appendNumber = 7;
var prependNumber = 1;
var swiper = new Swiper('.swiper-container', {
    pagination: '.swiper-pagination',
    nextButton: '.swiper-button-next',
    prevButton: '.swiper-button-prev',
    slidesPerView: 8,
    paginationClickable: true,
    spaceBetween: 5,
});

	$(function() {
		$("#coursepj").addClass("liactive")
		initialize();
		getdatas("Linux Shell编程实训","0","kc0"); // 0为初始化
		var tmp="<a href='${request.contextPath}/'>首页</a><span style='padding:0 10px'>&gt;</span><a href='${request.contextPath}/learning/index'>学情</a><span style='padding:0 10px'>&gt;</span><a href='javascript:void(0)'>教学分析</a><span style='padding:0 10px'>&gt;</span><a href='javascript:void(0)'>课程评价</a>"
		$("#route").html(tmp);
	})


	
	function getdatas(name,status,id){
		if(status=="1"){
// 		$(".ImgBox").removeClass("select");
// 		$("#"+id).addClass("select");
// alert(id);
		$("#kc0").removeClass("xsshow");
		$("#kc1").removeClass("xsshow");
		$("#kc2").removeClass("xsshow");
		$("#kc3").removeClass("xsshow");
		$("#kc4").removeClass("xsshow");
		$("#kc5").removeClass("xsshow");
		$("#kc6").removeClass("xsshow");
		$("#kc7").removeClass("xsshow");
		$("#kc8").removeClass("xsshow");
		$("#kc9").removeClass("xsshow");
		$("#kc11").removeClass("xsshow");
		$("#kc12").removeClass("xsshow");
		$("#kc13").removeClass("xsshow");
		$("#kc14").removeClass("xsshow");
		$("#kc15").removeClass("xsshow");
		$("#kc16").removeClass("xsshow");
		$("#kc17").removeClass("xsshow");
		$("#kc18").removeClass("xsshow");
		$("#kc19").removeClass("xsshow");
		$("#kc20").removeClass("xsshow");
		$("#kc21").removeClass("xsshow");
		$("#kc22").removeClass("xsshow");
		$("#kc23").removeClass("xsshow");
		$("#kc24").removeClass("xsshow");
		$("#kc25").removeClass("xsshow");
		$("#kc26").removeClass("xsshow");
		$("#kc27").removeClass("xsshow");
		$("#kc28").removeClass("xsshow");
		$("#kc29").removeClass("xsshow");
		$("#kc30").removeClass("xsshow");
		$("#"+id).addClass("xsshow");
		}
		radar(name);
		brole(name);
	}
	
	function initialize(){
		$.ajax({
			url : "${request.contextPath}/learning/getcourrad",
			type : "post",
			data : {
			},
			success : function(s) {
				var coame = s.msg[3];
				var trc = ""; 
				for(var j=0;j<coame.length;j++){
					var ccn = coame[j].picurl;
					var cmesa = coame[j].coursename;
					trc+="<div class=\"swiper-slide\" id=\"kc"+j+"\" style=\"width:120px;top:9px;margin:5px;cursor:pointer;\">";
					trc+="<img src='${request.contextPath}"+ccn+"' class=\"img-responsive\" onclick=\"getdatas('"+cmesa+"',1,'kc"+j+"')\"/>";
					trc+="</div>";
				}
				$("#spoic").html(trc);
			}
		});	
	}
function radar(name){
	$.ajax({
		url : "${request.contextPath}/learning/getcourrad",
		type : "post",
		data : {
			course : name
		},
		success : function(s) {
// 			var coame = s.msg[3];
// 			var trc = ""; 
// 			for(var j=0;j<coame.length;j++){
// 				var ccn = coame[j].picurl;
// 				var cmesa = coame[j].coursename;
// 				trc+="<div class=\"swiper-slide\" id=\"kc"+j+"\" style=\"width:120px;height:90px;top:9px;margin:5px;cursor:pointer;\">";
// 				trc+="<img src='"+ccn+"' class=\"img-responsive\" onclick=\"getdatas('"+cmesa+"',1,'kc"+j+"')\"/>";
// 				trc+="</div>";
// 			}
// 			$("#spoic").html(trc);
			
			var mspnum = s.msg[0];
			var cou = mspnum[0];//老师名称
			var map = mspnum[1];
			var count = map.count;//学生数量
			var tscore = map.tscore;//老师综合得分
			var radtu = JSON.parse(s.msg[1]);//雷达图
			var coursename = s.msg[2];//课程名称
			 var str = "";
			 str+="<div class=\"pull-left\">";
			 str+="<div class=\"courseTitle\">"+coursename+"</div>";
			 str+="<div class=\"courseTea\">";
			 str+="<span>老师&nbsp;:&nbsp;"+cou+"</span>";
			 str+="<span class=\"stunum\">学生&nbsp;:&nbsp;"+count+"人</span>";
			 str+="</div>";
			 str+="</div>";
			 str+="<div class=\"pull-right\">";
			 str+="<div class=\"courseScore\"><span>"+tscore+"</span>分</div>";
			 str+="</div>";
			 $("#xsdhow").html(str);
			 
			 option = {
					    title: {
					        text: coursename,
					        bottom:'20%',
					        left:'center'
					    },
					    tooltip: {},
					    legend: {
// 					        data: ['课程评价'],
					        top:'0%',
					        itemGap:50
					    },
					    radar: {
					    	   radius:'80%',
					        name: {
					            textStyle: {
					                color: '#000',
					               
					           }
					        },
					        indicator: [
					           { name: '专业技能', max: 100},
					           { name: '课程设计', max: 100},
					           { name: '教学方法', max: 100} 
					        ]
					    },
					    series: [{
					    	name: '课程评价',
					        type: 'radar',
					        data : [
					            {
					                value : radtu
					            }
					        ]
					    }]
					};
				//根据实际情况绘制
					chart.setOption(option);
		}
	});	
}

function brole(name){
	$.ajax({
		url : "${request.contextPath}/learning/getbroleline",
		type : "post",
		data : {
			course : name
		},
		success : function(s) {
			var res = s.msg[0];
			var dname = res.split(",");
			var rezy = JSON.parse(s.msg[1]);
			var rekc = JSON.parse(s.msg[2]);
			var rejx = JSON.parse(s.msg[3]);

			option1 = {

				    tooltip : {
				        trigger: 'axis',
				        axisPointer: {
				            type: 'cross',
				            label: {
				                backgroundColor: '#6a7985'
				            }
				        }
				    },
				    legend: {
				        data:['专业技能','课程设计','教学方法']
				    },
				  
				    grid: {
				        left: '3%',
				        right: '4%',
				        bottom: '3%',
				        containLabel: true
				    },
				    xAxis : [
				        {
				        	name : '开课次数',
				            type : 'category',
				            boundaryGap : false,
				            data : dname
				        }
				    ],
				    yAxis : [
				        {
				        	name : '成绩',
				            type : 'value'
				        }
				    ],
				    series : [
				        {
				            name:'专业技能',
				            type:'line',
				            stack: '总量',
				            areaStyle: {normal: {}},
				            data:rezy
				        },
				        {
				            name:'课程设计',
				            type:'line',
				            stack: '总量',
				            areaStyle: {normal: {}},
				            data:rekc
				        },
				        {
				            name:'教学方法',
				            type:'line',
				            stack: '总量',
				            areaStyle: {normal: {}},
				            data:rejx
				        }
				    ]
				};
			chart1.setOption(option1);
		}
	});
}	

</script>

</body>
</html>