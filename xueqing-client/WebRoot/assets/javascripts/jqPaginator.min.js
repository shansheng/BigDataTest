(function(c){c.jqPaginator=function(e,f){var a=this;a.$container=c(e);a.$container.data("jqPaginator",a);a.init=function(){var b=a.options=c.extend({},c.jqPaginator.defaultOptions,f);if(!b.totalPages&&!b.totalCounts)throw Error("[jqPaginator] totalCounts or totalPages is required");if(!b.totalPages&&b.totalCounts&&!b.pageSize)throw Error("[jqPaginator] pageSize is required");!b.totalPages&&b.totalCounts&&b.pageSize&&(b.totalPages=Math.ceil(b.totalCounts/b.pageSize));if(1>b.currentPage||b.currentPage>b.totalPages)throw Error("[jqPaginator] currentPage is incorrect");if(1>b.totalPages)throw Error("[jqPaginator] totalPages cannot be less currentPage");a.extendJquery();a.render();a.fireEvent(this.options.currentPage)};a.extendJquery=function(){c.fn.jqPaginatorHTML=function(a){return a?this.before(a).remove():c("\x3cp\x3e").append(this.eq(0).clone()).html()}};a.render=function(){a.renderHtml();a.setStatus();a.bindEvents()};a.renderHtml=function(){for(var b=[],d=a.getPages(),h=0,g=d.length;h<g;h++)b.push(a.buildItem("page",d[h]));a.isEnable("prev")&&b.unshift(a.buildItem("prev",a.options.currentPage-1));a.isEnable("first")&&b.unshift(a.buildItem("first",1));a.isEnable("statistics")&&b.unshift(a.buildItem("statistics"));a.isEnable("next")&&b.push(a.buildItem("next",a.options.currentPage+1));a.isEnable("last")&&b.push(a.buildItem("last",a.options.totalPages));a.options.wrapper?a.$container.html(c(a.options.wrapper).html(b.join("")).jqPaginatorHTML()):a.$container.html(b.join(""))};a.buildItem=function(b,d){var h=a.options[b].replace(/{{page}}/g,d).replace(/{{totalPages}}/g,a.options.totalPages).replace(/{{totalCounts}}/g,a.options.totalCounts);return c(h).attr({"jp-role":b,"jp-data":d}).jqPaginatorHTML()};a.setStatus=function(){var b=a.options;a.isEnable("first")&&1!==b.currentPage||c("[jp-role\x3dfirst]",a.$container).addClass(b.disableClass);a.isEnable("prev")&&1!==b.currentPage||c("[jp-role\x3dprev]",a.$container).addClass(b.disableClass);(!a.isEnable("next")||b.currentPage>=b.totalPages)&&c("[jp-role\x3dnext]",a.$container).addClass(b.disableClass);(!a.isEnable("last")||b.currentPage>=b.totalPages)&&c("[jp-role\x3dlast]",a.$container).addClass(b.disableClass);c("[jp-role\x3dpage]",a.$container).removeClass(b.activeClass);c("[jp-role\x3dpage][jp-data\x3d"+b.currentPage+"]",a.$container).addClass(b.activeClass)};a.getPages=function(){var b=[],d=a.options.visiblePages,c=a.options.currentPage,g=a.options.totalPages;d>g&&(d=g);var e=Math.floor(d/2),f=c-e+1-d%2,c=c+e;1>f&&(f=1,c=d);c>g&&(c=g,f=1+g-d);for(d=f;d<=c;)b.push(d),d++;return b};a.isEnable=function(b){return a.options[b]&&"string"===typeof a.options[b]};a.switchPage=function(b){a.options.currentPage=b;a.render()};a.fireEvent=function(b){return"function"!==typeof a.options.onPageChange||!1!==a.options.onPageChange(b)};a.callMethod=function(b,d){switch(b){case "option":a.options=c.extend({},a.options,d);a.render();break;case "destroy":a.$container.empty();a.$container.removeData("jqPaginator");break;default:throw Error('[jqPaginator] method "'+b+'" does not exist');}return a.$container};a.bindEvents=function(){var b=a.options;a.$container.off();a.$container.on("click","[jp-role]",function(){var d=c(this);d.hasClass(b.disableClass)||d.hasClass(b.activeClass)||(d=+d.attr("jp-data"),a.fireEvent(d)&&a.switchPage(d))})};a.init();return a.$container};c.jqPaginator.defaultOptions={wrapper:"",first:"",prev:"",next:"",last:"",page:"",totalPages:0,totalCounts:0,pageSize:0,currentPage:1,visiblePages:7,disableClass:"disabled",activeClass:"active",onPageChange:null};c.fn.jqPaginator=function(){var e=Array.prototype.slice.call(arguments);if("string"===typeof e[0]){var f=c(this).data("jqPaginator");if(f)return f.callMethod(e[0],e[1]);throw Error("[jqPaginator] the element is not instantiated");}return new c.jqPaginator(this,e[0])}})(jQuery);